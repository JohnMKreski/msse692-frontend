<section class="events-page" ngSkipHydration>
    <div class="page-header">
        <h1 class="page-title">Events Calendar</h1>
        <button type="button" class="refresh-btn" (click)="onRefreshClick()" [disabled]="calendarLoading" *ngIf="isBrowser()">Refresh</button>
    </div>

    <!-- View toggle removed: /events now shows only Published events -->

    <!-- Sort & filter controls deferred to future sprint
    <div class="sort-controls" aria-label="Sort events">
        <label>
            Sort by
            <select [(ngModel)]="sortField" (ngModelChange)="onSortChange()">
                <option [ngValue]="'startAt'">Start time</option>
                <option [ngValue]="'eventName'">Name</option>
                <option [ngValue]="'eventType'">Type</option>
            </select>
        </label>
        <label>
            Direction
            <select [(ngModel)]="sortDir" (ngModelChange)="onSortChange()">
                <option [ngValue]="'asc'">Ascending</option>
                <option [ngValue]="'desc'">Descending</option>
            </select>
            <select [ngModel]="selectedType" (ngModelChange)="onTypeChange($event)">
                <option [ngValue]="null">All Types</option>
                <option *ngFor="let t of (typeOptions$ | async ) ?? []" [ngValue]="t.value">{{ t.label }}</option>
            </select>
        </label>
    </div>
    -->

    <div class="legend-container">
        <div class="legend" aria-label="Event Types Legend">
            <span class="legend-title">Event Types</span>
            <span *ngFor="let t of typeLegend" class="legend-item">
                <span class="color-dot" [style.backgroundColor]="t.color"></span>{{ t.label }}
            </span>
        </div>
    </div>

    <!-- Upcoming list removed per request -->

    <!-- Server-side placeholder to keep SSR markup stable -->
    <div *ngIf="!isBrowser()" class="calendar-placeholder" aria-hidden="true">
        <p>Calendar is available on the client.</p>
    </div>

    <!-- Reusable calendar component (Published only) with fixed frame -->
    <div *ngIf="isBrowser()" class="calendar-wrapper" aria-label="Events calendar">
        <app-events-calendar
            mode="PUBLISHED"
            [events]="publishedEvents"
            [loading]="calendarLoading"
            (dateRangeChange)="onCalendarRange($event)"
            (eventClick)="onEventIdClick($event)">
        </app-events-calendar>
    </div>
</section>
