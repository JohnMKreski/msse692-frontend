<section class="event-detail" *ngIf="event() as e; else loadingTpl">
  <header class="event-detail__header">
    <h1 class="event-detail__title">{{ e.eventName }}</h1>
    <app-status-badge [status]="e.status" size="sm"></app-status-badge>
  </header>

  <div class="event-detail__meta">
    <p><strong>Date:</strong> {{ e.startAt | date:'fullDate' }} <span *ngIf="e.endAt">– {{ e.endAt | date:'shortTime' }}</span></p>
    <p *ngIf="e.eventLocation"><strong>Location:</strong> {{ e.eventLocation }}</p>
  </div>

  <article class="event-detail__description" *ngIf="e.eventDescription">
    <p>{{ e.eventDescription }}</p>
  </article>

  <div class="event-detail__actions">
    <button mat-raised-button color="primary" (click)="publish()" [disabled]="!canPublish() || saving()">Publish</button>
    <button mat-stroked-button color="primary" (click)="unpublish()" [disabled]="!canUnpublish() || saving()">Unpublish</button>
    <button mat-raised-button color="warn" (click)="cancel()" [disabled]="!canCancel() || saving()">Cancel</button>
  </div>

  <p class="error" *ngIf="error() as err">{{ err }}</p>
</section>

<ng-template #loadingTpl>
  <div class="loading">
    <mat-spinner diameter="32"></mat-spinner>
    <span>Loading…</span>
  </div>
</ng-template>
