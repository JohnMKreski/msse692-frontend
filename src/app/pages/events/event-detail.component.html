<section class="event-detail" *ngIf="event() as e; else loadingOrErrorTpl">
  <header class="event-detail__header">
    <h1 class="event-detail__title">{{ e.eventName }}</h1>
    <app-status-badge [status]="e.status" size="sm"></app-status-badge>
  </header>

  <div class="event-detail__meta">
    <p><strong>Date:</strong> {{ e.startAt | date:'fullDate' }} <span *ngIf="e.endAt">– {{ e.endAt | date:'shortTime' }}</span></p>
    <p *ngIf="e.eventLocation"><strong>Location:</strong> {{ e.eventLocation }}</p>
    <p *ngIf="e.createdByUserId"><strong>Created By (User ID):</strong> {{ e.createdByUserId }}</p>
  </div>

  <article class="event-detail__description" *ngIf="e.eventDescription">
    <p>{{ e.eventDescription }}</p>
  </article>

  <div class="event-detail__actions" *ngIf="canManage()">
    <button mat-raised-button color="primary" (click)="manage()">Manage Event</button>
  </div>

  <p class="error" *ngIf="error() as err">{{ err }}</p>
</section>

<ng-template #loadingOrErrorTpl>
  <div *ngIf="error() as err; else justLoading" class="loading error-state">
    <mat-icon aria-hidden="true">error_outline</mat-icon>
    <span>{{ err }}</span>
  </div>
  <ng-template #justLoading>
    <div class="loading">
      <mat-spinner diameter="32"></mat-spinner>
      <span>Loading…</span>
    </div>
  </ng-template>
</ng-template>
